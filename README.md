# Vibe Shortener

üöÄ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π URL-—à–æ—Ä—Ç–µ–Ω–µ—Ä —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π**

–ë—ã—Å—Ç—Ä—ã–π –∏ —É–¥–æ–±–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ FastAPI, PostgreSQL –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚ö° **–ë—ã—Å—Ç—Ä—ã–π**: FastAPI + PostgreSQL —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- üìä **–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è, –≥—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üåç **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω—ã, —Ä–µ–≥–∏–æ–Ω–∞ –∏ –≥–æ—Ä–æ–¥–∞
- üé® **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å Tailwind CSS –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- üíæ **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- üîß **–ú–∏–≥—Ä–∞—Ü–∏–∏**: Alembic –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –ë–î
- üê≥ **Docker**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- üéØ **–ü—Ä–æ—Å—Ç–æ–π API**: RESTful API —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: FastAPI 0.116+ (Python 3.13)
- **Database**: PostgreSQL 16 —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
- **ORM**: SQLAlchemy 2.0 (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
- **Validation**: Pydantic v2
- **Frontend**: Jinja2 + Tailwind CSS + Chart.js
- **Geolocation**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ API (ip-api.com, ipinfo.io)
- **Package Manager**: uv
- **Linting**: Ruff

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
vibe_shortener/
‚îú‚îÄ‚îÄ src/                    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.py            # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.py          # Pydantic Settings
‚îÇ   ‚îú‚îÄ‚îÄ database.py        # Async SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py         # Pydantic —Å—Ö–µ–º—ã + DTOs
‚îÇ   ‚îú‚îÄ‚îÄ services.py        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å DTO
‚îÇ   ‚îú‚îÄ‚îÄ geolocation.py     # –°–µ—Ä–≤–∏—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ utils.py           # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ routes/            # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shortener.py   # –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redirect.py    # –†–µ–¥–∏—Ä–µ–∫—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stats.py       # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ health.py      # Health check
‚îÇ   ‚îî‚îÄ‚îÄ web/               # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ       ‚îú‚îÄ‚îÄ templates/     # Jinja2 —à–∞–±–ª–æ–Ω—ã
‚îÇ       ‚îî‚îÄ‚îÄ static/        # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ infrastructure/         # Docker –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yaml
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ env/               # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ alembic/               # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ pyproject.toml         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (uv)
‚îú‚îÄ‚îÄ Makefile               # –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   make install
   ```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ Docker
   docker run -d --name postgres-shortener \
     -e POSTGRES_DB=shortener \
     -e POSTGRES_USER=shortener \
     -e POSTGRES_PASSWORD=shortener \
     -p 5432:5432 \
     postgres:16-alpine
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```bash
   make migrate-up-local
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä:**
   ```bash
   make dev
   ```

5. **–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```
   http://localhost:8000
   ```

### Docker Compose (self-hosting)

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone https://github.com/your-username/vibe-shortener.git
   cd vibe-shortener
   ```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   cp infrastructure/env/backend.env.example infrastructure/env/backend.env
   cp infrastructure/env/db.env.example infrastructure/env/db.env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ–¥ –≤–∞—à–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   make start
   ```

4. **–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```
   http://localhost:8000
   ```

## üìä API Endpoints

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏
```bash
POST /api/v1/shorten
Content-Type: application/json

{
  "original_url": "https://example.com/very-long-url"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "original_url": "https://example.com/very-long-url",
  "short_code": "abc123",
  "short_url": "http://localhost:8000/abc123",
  "created_at": "2024-01-01T12:00:00Z"
}
```

### –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ
```bash
GET /{short_code}
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL
# + –∑–∞–ø–∏—Å—å –º–µ—Ç—Ä–∏–∫ (IP, User-Agent, Referer, –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è)
```

### –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```bash
GET /api/v1/stats/{short_code}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "url_id": 1,
  "short_code": "abc123",
  "original_url": "https://example.com/very-long-url",
  "short_url": "http://localhost:8000/abc123",
  "total_clicks": 42,
  "created_at": "2024-01-01T12:00:00Z",
  "last_click": "2024-01-15T14:30:00Z"
}
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
```bash
GET /api/v1/stats/{short_code}/detailed
```

**–û—Ç–≤–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç:**
- –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ 7 –¥–Ω–µ–π
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ —á–∞—Å–∞–º
- –¢–æ–ø User-Agent'–æ–≤
- –ì–µ–æ–≥—Ä–∞—Ñ–∏—é –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```bash
GET /health
```

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/`)
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞

### –ú–æ–∏ —Å—Å—ã–ª–∫–∏ (`/links`)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- –ü–æ–∏—Å–∫ –ø–æ —Å—Å—ã–ª–∫–∞–º
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (`/stats`)
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã (Chart.js)
- –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**backend.env:**
```env
DATABASE_URL=postgresql://user:password@host:5432/database
ENVIRONMENT=production  # development/production
DOMAIN=your-domain.com
```

**db.env:**
```env
POSTGRES_DB=shortener
POSTGRES_USER=your_user
POSTGRES_PASSWORD=your_secure_password
POSTGRES_HOST=db
POSTGRES_PORT=5432
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ PostgreSQL
- Connection pooling (10-30 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª—è—Ö
- pg_stat_statements –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è URL-—à–æ—Ä—Ç–µ–Ω–µ—Ä–∞

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
make install
```

### –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
make lint    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make format  # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### –¢–µ—Å—Ç—ã
```bash
make test
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏
```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
make migrate-local name=add_new_field

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make migrate-up-local

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
make migrate-down
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
make db-shell

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
docker compose -f infrastructure/docker-compose.yaml exec db pg_dump -U shortener shortener > backup.sql
```

## üöÄ –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ Docker Compose
- Git
- –ú–∏–Ω–∏–º—É–º 1GB RAM
- 10GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**
   ```bash
   git clone https://github.com/your-username/vibe-shortener.git
   cd vibe-shortener
   
   # –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   cp infrastructure/env/backend.env.example infrastructure/env/backend.env
   cp infrastructure/env/db.env.example infrastructure/env/db.env
   nano infrastructure/env/backend.env
   nano infrastructure/env/db.env
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å:**
   ```bash
   make start
   ```

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/nginx/sites-available/vibe-shortener`:

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–∞–π—Ç:
```bash
sudo ln -s /etc/nginx/sites-available/vibe-shortener /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

### SSL —Å Let's Encrypt
```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ (systemd)

–°–æ–∑–¥–∞–π—Ç–µ `/etc/systemd/system/vibe-shortener.service`:

```ini
[Unit]
Description=Vibe Shortener
Requires=docker.service
After=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/path/to/vibe-shortener
ExecStart=/usr/bin/docker compose -f infrastructure/docker-compose.yml up -d
ExecStop=/usr/bin/docker compose -f infrastructure/docker-compose.yml down
TimeoutStartSec=0

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ:
```bash
sudo systemctl enable vibe-shortener
sudo systemctl start vibe-shortener
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose -f infrastructure/docker-compose.yml logs app
docker compose -f infrastructure/docker-compose.yml logs db
```

### –ú–µ—Ç—Ä–∏–∫–∏ PostgreSQL
```sql
-- –¢–æ–ø —Å—Å—ã–ª–æ–∫ –ø–æ –ø–µ—Ä–µ—Ö–æ–¥–∞–º
SELECT u.short_code, u.original_url, COUNT(c.id) as clicks
FROM urls u
LEFT JOIN clicks c ON u.id = c.url_id
GROUP BY u.id, u.short_code, u.original_url
ORDER BY clicks DESC
LIMIT 10;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏
SELECT 
    c.ip_address,
    COUNT(*) as clicks,
    COUNT(DISTINCT c.url_id) as unique_urls
FROM clicks c
WHERE c.ip_address IS NOT NULL
GROUP BY c.ip_address
ORDER BY clicks DESC
LIMIT 20;

-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)
SELECT 
    DATE(created_at) as date,
    COUNT(*) as clicks
FROM clicks 
WHERE created_at >= NOW() - INTERVAL '7 days'
GROUP BY DATE(created_at)
ORDER BY date;

-- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —á–∞—Å–∞–º
SELECT 
    EXTRACT(HOUR FROM created_at) as hour,
    COUNT(*) as clicks
FROM clicks 
GROUP BY EXTRACT(HOUR FROM created_at)
ORDER BY hour;
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
make down

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
make start

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
make migrate-up
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞:
1. **–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall**
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
5. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**

### Firewall (Ubuntu/Debian):
```bash
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
```



## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

**Vibe Shortener** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π –∏ —É–¥–æ–±–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π. üöÄ
